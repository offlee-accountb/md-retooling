# HWPX 문서 데이터 추출 프롬프트
# ============================================================
# 
# 용도: 
#   - HWPX 원본 문서와 함께 LLM에 제공
#   - 실제 입력해야 할 값을 사용자로부터 수집하기 위한 질문 생성
#
# 사용 흐름:
#   1. HWPX 문서를 분석하여 필요한 필드 목록 추출
#   2. 이 프롬프트를 기반으로 사용자에게 질문
#   3. 응답을 input_template.yaml 형식으로 변환
#   4. smart_injector.py로 주입
# ============================================================

---
# SYSTEM PROMPT (LLM 설정용)
system: |
  당신은 정부지원사업 신청서 작성을 도와주는 어시스턴트입니다.
  사용자가 제출할 문서에 필요한 정보를 친절하게 수집합니다.
  
  규칙:
  1. 한 번에 너무 많은 질문을 하지 않습니다 (3-5개씩)
  2. 필수 항목과 선택 항목을 구분하여 안내합니다
  3. 입력 형식이 있는 경우 예시를 제공합니다
  4. 수집한 정보는 최종 확인을 받습니다

---
# USER PROMPT (대화 시작용)
user_prompt: |
  ## 📋 신청서 작성 도우미
  
  **{document_name}** 작성을 도와드리겠습니다.
  
  아래 정보들을 순서대로 입력해 주세요.
  잘 모르거나 해당 없는 항목은 "없음" 또는 "모름"이라고 답해주세요.
  
  ---
  
  ### 1️⃣ 기업 기본정보
  
  다음 정보를 알려주세요:
  
  | 항목 | 입력 예시 |
  |------|----------|
  | **기업명(상호)** | (주)스마트테크, ABC 주식회사 |
  | **대표자 성함** | 홍길동 |
  | **사업자등록번호** | 123-45-67890 (10자리) |
  | **설립일자** | 2018-03-15 또는 2018년 3월 15일 |
  | **회사 주소** | 서울시 강남구 테헤란로 123 |
  
  ---
  
  ### 2️⃣ 담당자 정보
  
  신청서 관련 문의를 받으실 담당자 정보입니다:
  
  | 항목 | 입력 예시 |
  |------|----------|
  | **부서명** | 기술개발팀, 경영지원팀 |
  | **직위** | 팀장, 과장, 대리 |
  | **담당자 성함** | 김담당 |
  | **휴대폰** | 010-1234-5678 |
  | **유선전화** | 02-555-1234 (없으면 생략) |
  | **이메일** | contact@company.co.kr |
  
  ---
  
  ### 3️⃣ 추가 정보 (문서별 상이)
  
  | 항목 | 설명 |
  |------|------|
  | **수신자** | 문서를 제출할 기관장 (예: 중소벤처기업부장관) |
  | **신청일** | 자동입력(오늘) 또는 직접 지정 |

---
# 응답 파싱 가이드
parsing_guide: |
  ## 응답 → YAML 변환 규칙
  
  사용자 응답을 아래 형식으로 변환:
  
  ```yaml
  fields:
    - label: "기업명"
      value: "{사용자 입력값}"
    - label: "대표자"
      value: "{사용자 입력값}"
    ...
  ```
  
  ### 특수 처리
  
  1. **날짜 자동입력**
     - 사용자가 "오늘", "자동" 입력 → `value: "AUTO_DATE"`
  
  2. **동일 값 참조**
     - "기업명과 동일" → 기업명 값을 복사
     - "대표자와 동일" → 대표자 값을 복사
  
  3. **빈 값 처리**
     - "없음", "모름", "해당없음" → `value: ""` (빈 문자열)
  
  4. **형식 정규화**
     - 전화번호: 하이픈 포함 (010-1234-5678)
     - 사업자번호: 하이픈 포함 (123-45-67890)
     - 날짜: YYYY-MM-DD 또는 YYYY년 M월 D일

---
# 필드 매핑 (문서 분석 결과)
field_mapping:
  # 문서에서 발견된 라벨 → 표준 라벨
  기업명: ["기업체명", "회사명", "상호", "법인명"]
  대표자: ["대표이사", "대표자명", "대표"]
  사업자등록번호: ["사업자번호", "등록번호"]
  설립일자: ["설립일", "창업일"]
  주소: ["소재지", "사업장주소"]
  부서명: ["부서", "소속"]
  직위: ["직책", "직급"]
  성명: ["이름", "담당자명", "담당자"]
  휴대폰: ["휴대전화", "핸드폰", "HP"]
  전화: ["전화번호", "유선전화", "TEL"]
  이메일: ["E-mail", "email", "메일"]
  귀중: ["귀하", "앞"]

---
# 확인 프롬프트
confirmation_prompt: |
  ## ✅ 입력 정보 확인
  
  입력하신 정보를 확인해 주세요:
  
  **기업 정보**
  - 기업명: {기업명}
  - 대표자: {대표자}
  - 사업자등록번호: {사업자등록번호}
  - 설립일자: {설립일자}
  - 주소: {주소}
  
  **담당자 정보**
  - 부서/직위: {부서명} {직위}
  - 성명: {성명}
  - 연락처: {휴대폰} / {전화}
  - 이메일: {이메일}
  
  **수신자**: {귀중}
  
  ---
  
  위 정보가 맞으면 **"확인"**, 수정할 내용이 있으면 **수정할 항목**을 알려주세요.

---
# 최종 출력 템플릿
output_template: |
  # {document_name} - 입력 데이터
  # 생성일: {today}
  
  fields:
  {fields_yaml}
  
  keywords: {{}}
  tables: {{}}
